parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gTvj":[function(require,module,exports) {
"use strict";function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0});var e={},n={},s={months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};function r(t){if(!e[t]){var a=new Date(t);e[t]=s.months[a.getMonth()]+" "+a.getDate()}return e[t]}function o(t){if(!n[t]){var a=new Date(t);n[t]=""+s.weekdays[a.getDay()]}return n[t]}var h="visually-hidden",c="chart__minimap-dragger-arrow--active",l=6,d=1,_=50,u=40,m=16,v=65,f=32,g=100,p=function(){var t=document.createElement("canvas").getContext("2d");return(devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(),y=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,w={Minimap:"minimap",MinimapBackground:"minimap-background",Chart:"chart",Float:"float"},x={Line:"line",Bar:"bar",Area:"area"},k={ChartSeparator:{day:{r:235,g:240,b:243},night:{r:39,g:53,b:69}},FloatingLine:{day:"#dee6eb",night:"#384a5b"},ChartBackground:{day:"#ffffff",night:"#222f3f"},ChartText:{day:{r:175,g:181,b:187},night:{r:80,g:103,b:121}},MinimapBackground:{day:"rgba(240, 247, 252, 0.6)",night:"rgba(29, 42, 57, 0.8)"}},C='\n  <svg class="checked-icon" height="20" width="20" viewBox="0 0 40 40">\n    <polyline class="checked-icon__done" points="12,21 18,27 30,14" stroke-width="3" stroke-linejoin="round" stroke-linecap="round" stroke="white" fill="none" />\n  </svg>\n',M={passive:!0};function b(t){var a=y.exec(t);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function D(t,a){return void 0===a&&(a=1),"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(a,")")}function A(t,a){var i=document.createElement("canvas");i.width=t*p,i.height=a*p,i.style.width=t+"px",i.style.height=a+"px";var e=i.getContext("2d");return e.lineJoin="round",e.setTransform(p,0,0,p,0,0),e.font="lighter 13px Helvetica, Arial",i}function L(t,a){var i=!1,e=null;return function n(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];i?e=r:(t.apply(void 0,r),i=!0,setTimeout(function(){i=!1,e&&(n.apply(void 0,e),e=null)},a))}}function E(t,a){var i=t+a;return t>0?i<0?0:i:i>0?0:i}function T(t){return t>1e6?(t/1e6).toFixed(1)+"M":t>1e3?(t/1e3).toFixed(1)+"K":t}function S(t,a){if(t>a)return a/t;var i=d*a;return t<i?i/t:1}function R(t,a){return a.clientX-t.getBoundingClientRect().left}function P(t,a){t.transform="translateX(".concat(a,"px)")}function X(){return{prev:{min:0,max:0},current:{min:0,max:0}}}var B=document.querySelector(".app"),W={modes:{Night:"night",Day:"day"},modeSwitcherData:{element:null,updateHooks:[],captions:{night:"Switch to Day Mode",day:"Switch to Night Mode"},mode:"day"},listenersActivated:!1,mousemoveConsumers:[],mouseupConsumers:[],touchmoveConsumers:[],onMouseUp:function(t){for(var a=W.mouseupConsumers,i=0;i<a.length;i++)a[i](t)},onTouchMove:function(t){for(var a=W.touchmoveConsumers,i=0;i<a.length;i++)a[i](t)},onMouseMove:function(t){for(var a=W.mousemoveConsumers,i=0;i<a.length;i++)a[i](t)},activateDragEvents:function(){document.addEventListener("mousemove",W.onMouseMove,M),document.addEventListener("mouseup",W.onMouseUp,M),document.addEventListener("touchmove",W.onTouchMove,M),document.addEventListener("touchend",W.onMouseUp,M),W.listenersActivated=!0}},H=[w.Minimap,w.Chart];function O(t,a,i){return{canvas:A(a,i),context:null,width:a,height:i,type:t}}function Y(t){var a=document.createElement("div"),i=document.createElement("div"),e=document.createElement("div");return a.className="chart__minimap-dragger hide-selection",a.style.height="".concat(_,"px"),a.style.width="".concat(t,"px"),i.className="chart__minimap-dragger-arrow chart__minimap-dragger-arrow--left",e.className="chart__minimap-dragger-arrow chart__minimap-dragger-arrow--right",a.appendChild(i),a.appendChild(e),a}function F(t){return"floating-window__".concat(t.replace(/ +/g,"_"))}function N(t,a){var i="";for(var e in t.names)i+='\n      <li class="floating-window__section" style="color: '.concat(D(a[e]),'">\n        <span class="floating-window__count ').concat(F(e),'"></span>\n        <span class="floating-window__label">').concat(t.names[e],"</span>\n      </li>");var n=document.createElement("div");return n.className="floating-window ".concat(h),n.innerHTML='<p class="floating-window__date"></p><ul class="floating-window__sections">'+i+"</ul>",n.innerHTML='\n    <p class="floating-window__date"></p>\n    <ul class="floating-window__sections">'.concat(i,"</ul>"),n}function z(t){return k[t][W.modeSwitcherData.mode]}var q=function(){function a(i,e,n){t(this,a);var s=n.w,r=n.h;this._data=e,this._lines=[],this._dates=null,this._chartType=null;var o=e.columns[0].length-1;o>400?(this._overflow=!0,this._dataCount=400):(this._overflow=!1,this._dataCount=o),this._visibleCount=0,this._minimapCleaned=!1,this._forceRenderDates=!0,this._datesCleaned=!1,this._activeAnimations=0,this._chart=O(w.Chart,s,r),this._chart.height-=f,this._yAxisAnimationShift=this._chart.height/l*3,this._chart.canvas.className="chart__chart-canvas hide-selection",this._chart.context=this._chart.canvas.getContext("2d"),this._float=O(w.Float,s,r),this._float.height-=f,this._float.canvas.className="chart__float-canvas hide-selection",this._float.context=this._float.canvas.getContext("2d"),this._minimap=O(w.Minimap,s,_),this._minimapBackground=O(w.MinimapBackground,s,_),this._minimapBackground.canvas.className="chart__minimap-background-canvas hide-selection",this._minimapBackground.context=this._minimapBackground.canvas.getContext("2d"),this._minimap.canvas.className="chart__minimap-canvas hide-selection",this._minimap.context=this._minimap.canvas.getContext("2d"),this._rgbColors={},this._animations=[];var h=s/this._dataCount,c=1;h<35&&s/(c=35/h)<u&&(c=s/u),this._transitions={chartsOpacity:{},datesOpacity:1,yAxis:{opacity:1,toDown:!1,shift:0},xShift:0},this._transitions[w.Minimap]={yRatioModifer:0,xRatioModifer:1},this._transitions[w.Chart]={yRatioModifer:0,xRatioModifer:c};for(var d=0;d<e.columns.length;d++){var m=e.columns[d],v=m[0];if("x"!==this._data.types[v]){this._rgbColors[v]=b(this._data.colors[v]),this._transitions.chartsOpacity[v]=1;var g=m.slice(1);this._overflow&&(g=g.slice(-this._dataCount)),this._lines.push({type:v,data:g}),this._chartType=this._chartType?this._chartType:this._data.types[v],this._visibleCount++}else{var p=m.slice(1);this._overflow&&(p=p.slice(-this._dataCount)),this._dates=p}}this._container=i,this._checkboxContainer=null;var y=s/c,x=s-y;this._state={exclude:{},floatingWindow:{elem:null,labels:{},dateElem:null},drag:{active:!1,resize:!1,leftArrow:!1,dragger:Y(y),elem:null,leftElem:null,rightElem:null,initialWidth:y,width:y,marginLeft:x,savedTouchX:0,touchEventAdapterData:{movementX:0}}};var k=document.createDocumentFragment(),C=document.createElement("div"),D=this._state.floatingWindow,A=this._state.drag,E=A.dragger;A.leftElem=E.querySelector(".chart__minimap-dragger-arrow--left"),A.rightElem=E.querySelector(".chart__minimap-dragger-arrow--right"),D.elem=N(this._data,this._rgbColors),D.dateElem=D.elem.querySelector(".floating-window__date");for(var T=0;T<this._lines.length;T++)D.labels[this._lines[T].type]=D.elem.querySelector(".".concat(F(this._lines[T].type)));P(E.style,x),this._transitions.xShift=x/this._minimap.width,C.className="chart__minimap-wrapper",C.style.width="".concat(s,"px"),C.appendChild(this._minimap.canvas),C.appendChild(this._minimapBackground.canvas),C.appendChild(E),k.appendChild(this._chart.canvas),k.appendChild(this._float.canvas),k.appendChild(this._state.floatingWindow.elem),k.appendChild(C),this._container.appendChild(k),this._container.style.width="".concat(s,"px"),this._onChangeCheckbox=this._onChangeCheckbox.bind(this),this._animationLoop=this._animationLoop.bind(this),this._startDrag=this._startDrag.bind(this),this._moveDrag=this._moveDrag.bind(this),this._endDrag=this._endDrag.bind(this),this._startDragTouchAdapter=this._startDragTouchAdapter.bind(this),this._moveDragTouchAdapter=L(this._moveDragTouchAdapter.bind(this),16),this._floatMoveTouchAdapter=this._floatMoveTouchAdapter.bind(this),this._floatMouseMove=L(this._floatMouseMove.bind(this),60),this._checkYScaleChange=L(this._checkYScaleChange.bind(this),160),this._floatMouseLeave=this._floatMouseLeave.bind(this),E.addEventListener("mousedown",this._startDrag,M),E.addEventListener("touchstart",this._startDragTouchAdapter,M),W.listenersActivated||W.activateDragEvents(),W.touchmoveConsumers.push(this._moveDragTouchAdapter),W.mouseupConsumers.push(this._endDrag),W.mousemoveConsumers.push(this._moveDrag),W.modeSwitcherData.updateHooks.push(this._animationLoop),this._float.canvas.addEventListener("mousemove",this._floatMouseMove,M),this._float.canvas.addEventListener("mouseleave",this._floatMouseLeave,M),this._float.canvas.addEventListener("touchstart",this._floatMoveTouchAdapter,M),this._localExtremums=X(),this._globalExtremums=X(),this._chartXParams={scale:0,shift:0,window:[]},this._minimapXParams={scale:0,shift:0,window:[]},this._storeXParams(this._minimapXParams,this._minimap),this._storeXParams(this._chartXParams,this._chart);var S=this._getHiddenDates(this._dataCount,s);this._hiddenDates={prev:S,current:S},this._findAllExtremums(),this._render(),this._drawMinimap(),this._renderButtons()}return i(a,[{key:"_floatMoveTouchAdapter",value:function(t){this._floatMouseMove(t.changedTouches[0])}},{key:"_floatMouseMove",value:function(t){if(!this._state.drag.active&&this._visibleCount){var a=this._chartXParams.scale,i=this._chartXParams.shift,e=R(this._float.canvas,t),n=Math.round((e-i)/a);this._drawFloatingLine(n,n*a+i)}}},{key:"_drawFloatingLine",value:function(t,a){var i=this._float.canvas,e=this._float.context,n=this._float.height,s=this._float.width,r=this._transitions.chartsOpacity;this._clear(i),e.beginPath(),e.lineWidth=1,e.strokeStyle=z("FloatingLine"),e.moveTo(a,0),e.lineTo(a,n),e.stroke();for(var o=this._getYParams(this._chart),h={date:0,x:a,toLeft:s/2<a,values:{}},c=0;c<this._lines.length;c++){var l=this._lines[c];if(r[l.type]){var d=n-l.data[t]*o;h.date=this._dates[t],h.values[l.type]=l.data[t],e.strokeStyle=D(this._rgbColors[l.type],1),e.beginPath(),e.arc(a,d,5,0,2*Math.PI,!1),e.lineWidth=2.5,e.fillStyle=z("ChartBackground"),e.fill(),e.stroke()}}this._updateFloatingWindow(h)}},{key:"_updateFloatingWindow",value:function(t){var a,i=t.x,e=t.date,n=t.toLeft,s=t.values,c=this._state.floatingWindow.elem,l=this._state.floatingWindow.dateElem,d=this._state.floatingWindow.labels;for(var _ in c.classList.remove(h),l.innerHTML=o(e)+", "+r(e),s)d[_].innerHTML=T(s[_]);a=n?i-c.offsetWidth-15:i+15,P(c.style,a)}},{key:"_hideFloatingWindowLabel",value:function(t,a){this._state.floatingWindow.labels[t].parentNode.classList.toggle("floating-window__section--hidden",a)}},{key:"_floatMouseLeave",value:function(){var t=this;setTimeout(function(){t._clear(t._float.canvas),t._state.floatingWindow.elem.classList.add(h)},g)}},{key:"_findAllExtremums",value:function(){var t=this._chartXParams.window;this._findExtremums(this._localExtremums,t),this._findExtremums(this._globalExtremums)}},{key:"_findExtremums",value:function(t,a){var i=-1/0,e=1/0,n=1,s=this._dataCount;a&&(n=a[0]+1,s=a[1]+1);for(var r=0;r<this._lines.length;r++){var o=this._lines[r];if(!this._state.exclude[o.type])for(var h=n;h<s;h++)o.data[h]>i&&(i=o.data[h]),o.data[h]<e&&(e=o.data[h])}i!==-1/0&&e/i>.5?i+=e:i*=1.05,t.prev.min=t.current.min,t.prev.max=t.current.max,t.current.min=e,t.current.max=i}},{key:"_startDragTouchAdapter",value:function(t){this._floatMouseLeave(),this._startDrag({which:1,target:t.target})}},{key:"_startDrag",value:function(t){if(1===t.which&&t.target){var a=this._state.drag,i=t.target.classList,e="chart__minimap-dragger--dragging";i.contains("chart__minimap-dragger-arrow")&&(e="chart__minimap-dragger--resizing",a.resize=!0,i.contains("chart__minimap-dragger-arrow--left")?(a.leftArrow=!0,a.leftElem.classList.add(c)):a.rightElem.classList.add(c)),this._state.drag.dragger.classList.add(e),a.active=!0,this._animationLoop()}}},{key:"_moveDragTouchAdapter",value:function(t){var a=t.changedTouches[0],i=this._state.drag,e=i.savedTouchX,n=a.clientX,s=0;e&&(s=n-e),i.savedTouchX=n,i.touchEventAdapterData.movementX=s,this._moveDrag(i.touchEventAdapterData)}},{key:"_moveDrag",value:function(t){var a=t.movementX,i=this._state.drag;if(i.active&&a){if(this._forceRenderDates=!0,i.resize)return this._handleResize(a);var e=this._minimap.width-i.width,n=i.marginLeft+a,s=n<0?0:n>e?e:n;P(i.dragger.style,s),i.marginLeft=s,this._transitions.xShift=s/this._minimap.width,this._storeXParams(this._chartXParams,this._chart),this._checkYScaleChange()}}},{key:"_handleResize",value:function(t){var a=this._state.drag;if(a.leftArrow){if(a.width-t<u||a.marginLeft+t<0)return;var i=a.marginLeft+t,e=i/this._minimap.width;return a.marginLeft=i,P(a.dragger.style,i),this._transitions.xShift=e,this._changeDragWidth(-t)}var n=this._minimap.width-a.width;a.width+t<u||a.marginLeft+t>n||this._changeDragWidth(t)}},{key:"_changeDragWidth",value:function(t){var a=this._transitions[w.Chart],i=this._state.drag,e=i.width+t,n=i.width/e;i.width=e,i.dragger.style.width=e+"px",this._pushAnimation(this._animateHorisontal(a.xRatioModifer,n*a.xRatioModifer)),this._storeXParams(this._chartXParams,this._chart),this._checkYScaleChange(),this._checkHiddenDatesChange()}},{key:"_checkHiddenDatesChange",value:function(){var t=this._hiddenDates,a=this._getHiddenDates(this._dataCount,this._chart.width);a._$count!==t.current._$count&&(t.prev=t.current,t.current=a,this._pushAnimation(this._animateDates(t.prev._$count<t.current._$count)))}},{key:"_checkYScaleChange",value:function(){var t=this._localExtremums.prev,a=this._localExtremums.current;this._findAllExtremums(),t.max!==a.max&&(this._pushAnimation(this._animateVertical(this._findYDeltas())),this._pushAnimation(this._animateYAxis(t.max<a.max)))}},{key:"_endDrag",value:function(){var t=this._state.drag;t.active=!1,t.leftArrow=!1,t.resize=!1,t.savedTouchX=0,t.dragger.classList.remove("chart__minimap-dragger--resizing"),t.dragger.classList.remove("chart__minimap-dragger--dragging"),t.leftElem.classList.remove(c),t.rightElem.classList.remove(c)}},{key:"_shouldRenderMinimap",value:function(){for(var t=!1,a=0;a<this._lines.length;a++){var i=this._lines[a],e=this._transitions.chartsOpacity[i.type];if(e>0&&e<1){t=!0;break}}return t||!!this._transitions[w.Minimap].yRatioModifer||this._minimapCleaned}},{key:"_shouldRenderDates",value:function(){return 1!==this._transitions.datesOpacity||this._forceRenderDates||this._datesCleaned}},{key:"_cleanUp",value:function(){this._clearChart(),this._shouldRenderMinimap()&&(this._clear(this._minimap.canvas),this._minimapCleaned=!0),this._shouldRenderDates()&&(this._clearDates(),this._datesCleaned=!0),this._clear(this._minimapBackground.canvas)}},{key:"_clearChart",value:function(){this._chart.context.clearRect(0,0,this._chart.width,this._chart.height)}},{key:"_clearDates",value:function(){this._chart.context.clearRect(0,this._chart.height,this._chart.width,this._chart.height+f)}},{key:"_clear",value:function(t){t.getContext("2d").clearRect(0,0,t.width,t.height)}},{key:"_render",value:function(){this._drawChart(),this._shouldRenderMinimap()&&(this._drawMinimap(),this._minimapCleaned=!1),this._shouldRenderDates()&&(this._renderDates(),this._datesCleaned=!1,this._forceRenderDates=!1),this._drawMinimapBackground()}},{key:"_drawChart",value:function(){this._chart.context.lineWidth=1,this._renderLines(this._chart),this._chart.context.lineWidth=2.5,this._renderChart(this._chart,this._chartXParams),this._renderYValues()}},{key:"_drawMinimap",value:function(){this._renderChart(this._minimap,this._minimapXParams)}},{key:"_drawMinimapBackground",value:function(){var t=this._minimapBackground.context,a=this._state.drag;t.fillStyle=z("MinimapBackground"),t.fillRect(0,0,a.marginLeft+8,this._minimapBackground.height),t.fillRect(a.marginLeft+a.width-8,0,this._minimapBackground.width,this._minimapBackground.height)}},{key:"_renderLines",value:function(t){var a=t.context,i=t.width,e=t.height,n=this._localExtremums.current,s=this._transitions.yAxis,r=e/l,o=z("ChartSeparator");if(a.beginPath(),n.max!==-1/0){for(var h=1;h<l;h++){var c=e-h*r+s.shift;if(c<=e&&(a.strokeStyle=D(o,s.opacity),a.moveTo(0,c),a.lineTo(i,c)),s.opacity<1){a.strokeStyle=D(o,1-s.opacity);var d=c+this._yAxisAnimationShift*(s.toDown?1:-1);d<e&&(a.moveTo(0,d),a.lineTo(i,d))}}a.strokeStyle=D(o,1),a.moveTo(0,e),a.lineTo(i,e)}a.stroke()}},{key:"_renderDates",value:function(){for(var t=this._chart.context,a=this._chart.height,i=this._chartXParams.scale,e=this._chartXParams.shift,n=this._chartXParams.window,s=this._hiddenDates,o=this._transitions.datesOpacity,h=n[0];h<n[1];h++){var c=h*i+e,l=h===this._dataCount-1,d=s.current[h]&&!s.prev[h],_=!s.current[h]&&s.prev[h]||d,u=1;t.textAlign=l?"right":"center",t.lineWidth=1,_&&(u=o),!u||!_&&s.current[h]||(t.fillStyle=D(z("ChartText"),u),t.fillText(r(this._dates[h]),c,a+18))}}},{key:"_renderYValues",value:function(){var t=this._chart.context,a=this._chart.height,i=this._localExtremums.current,e=this._localExtremums.prev,n=this._transitions.yAxis,s=a/l,r=z("ChartText"),o=a-6;if(t.lineWidth=1,i.max!==-1/0){t.textAlign="left";for(var h=1;h<l;h++){var c=o-h*s+n.shift,d=h/l;if(c<o&&(t.fillStyle=D(r,n.opacity),t.fillText(T(Math.round(i.max*d)),0,c)),n.opacity<1){var _=c+this._yAxisAnimationShift*(n.toDown?1:-1);_<o&&(t.fillStyle=D(r,1-n.opacity),t.fillText(T(Math.round(e.max*d)),0,_))}}t.fillStyle=D(r,1),t.fillText(0,0,o)}}},{key:"_storeXParams",value:function(t,a){var i=a.type,e=this._transitions.xShift,n=this._transitions[i],s=this._dataCount,r=s-1,o=a.width/r*n.xRatioModifer;if(t.scale=o,t.shift=-r*o*e,t.window[0]=0,t.window[1]=s,i===w.Chart){var h=Math.round(-t.shift/t.scale)-1,c=Math.round((a.width-t.shift)/t.scale)+2;t.window[0]=h<0?0:h,t.window[1]=c>s?s:c}}},{key:"_getYParams",value:function(t){return S((t.type===w.Chart?this._localExtremums:this._globalExtremums).current.max,t.height)+this._transitions[t.type].yRatioModifer}},{key:"_getHiddenDates",value:function(t,a){for(var i=this._chartXParams.window,e={},n=i[1]-i[0],s=1,r=0;n*v>a;){for(var o=t-1-s;o>=0;o-=2*s)e[o]||r++,e[o]=!0;for(var h=0,c=i[0];c<i[1];c++)h+=e[c]?0:1;n=h,s++}return e._$count=r,e}},{key:"_renderChart",value:function(t,a){for(var i=t.context,e=this._transitions.chartsOpacity,n=t.type===w.Chart,s=this._getYParams(t),r=0;r<this._lines.length;r++){var o=this._lines[r],h=o.type,c=e[h];if(0!==c){i.beginPath(),i.strokeStyle=D(this._rgbColors[h],c),i.fillStyle=D(this._rgbColors[h],c);for(var l=a.window[0];l<a.window[1];l++){var d=l*a.scale+(n?a.shift:0),_=t.height-o.data[l]*s;this._chartType===x.Bar?i.fillRect(d-a.scale,_,a.scale,t.height-_):i.lineTo(d,_)}i.stroke()}}}},{key:"_renderButtons",value:function(){for(var t="",a=this._data,i=this._container,e=0;e<this._lines.length;e++){var n=this._lines[e].type,s=D(this._rgbColors[n]);t+='\n        <li class="charts-selector__item hide-selection">\n          <label class="checkbox" style="color: '.concat(s,"; border-color: ").concat(s,';">\n            <input type="checkbox" class="checkbox__input ').concat(h,'" name="').concat(n,'" checked>\n            <div class="checkbox__wrapper" style="background-color: ').concat(s,';">\n              ').concat(C,'\n              <span class="checkbox__title">\n                ').concat(a.names[n],"\n              </span>\n            </div>\n          </label>\n        </li>")}var r=document.createElement("div");r.innerHTML='<ul class="charts-selector">'.concat(t,"</ul>"),this._checkboxContainer=r.children[0],this._checkboxContainer.addEventListener("change",this._onChangeCheckbox,M),i.appendChild(this._checkboxContainer)}},{key:"_onChangeCheckbox",value:function(t){var a=t.target,i=this._localExtremums;this._floatMouseLeave(),this._pushAnimation(this._animateHideChart(a.name,a.checked)),this._state.exclude[a.name]=!a.checked,this._visibleCount+=this._state.exclude[a.name]?-1:1,this._hideFloatingWindowLabel(a.name,!a.checked),this._findAllExtremums(),this._pushAnimation(this._animateVertical(this._findYDeltas())),i.prev.max!==i.current.max&&this._pushAnimation(this._animateYAxis(i.prev.max<i.current.max)),this._animationLoop()}},{key:"_pushAnimation",value:function(t){this._animations[t.tag]||this._activeAnimations++,this._animations[t.tag]=t.hook}},{key:"_findYDeltas",value:function(){for(var t=this._globalExtremums,a=this._localExtremums,i={},e=0;e<H.length;e++){var n=H[e],s=this["_"+n].height,r=n===w.Chart,o=r?a.prev:t.prev,h=r?a.current:t.current;i[n]=S(h.max,s)-S(o.max,s)}return i}},{key:"_animateVertical",value:function(t){for(var a=this,i="_animateVertical",e={},n=0;n<H.length;n++){var s=H[n];e[s]=t[s]/m,this._transitions[s].yRatioModifer=-t[s]}return{hook:function(){for(var n=0,s=0;s<H.length;s++){var r=H[s],o=a._transitions[r],h=o.yRatioModifer;h>=0&&t[r]>0||h<=0&&t[r]<0||0===e[r]?n++:o.yRatioModifer=E(h,e[r])}n===H.length&&(delete a._animations[i],a._activeAnimations--)},tag:i}}},{key:"_animateHorisontal",value:function(t,a){var i=this,e="_animateHorisontal",n=(a-t)/m,s=this._transitions[w.Chart];return s.xRatioModifer=a,{hook:function(){s.xRatioModifer+=n,(n<0&&s.xRatioModifer<=a||n>0&&s.xRatioModifer>=a||0===n)&&(s.xRatioModifer=a,delete i._animations[e],i._activeAnimations--)},tag:e}}},{key:"_animateHideChart",value:function(t,a){var i=this,e="_animateHideChart";return{hook:function(){var n=i._transitions.chartsOpacity;n[t]+=a?.08:-.08,(n[t]<=0&&!a||n[t]>=1&&a)&&(n[t]=a?1:0,delete i._animations[e],i._activeAnimations--)},tag:e}}},{key:"_animateDates",value:function(t){var a=this,i="_animateHideChart",e=this._transitions;return e.datesOpacity=t?1:0,{hook:function(){e.datesOpacity+=t?-.06:.06,(e.datesOpacity<=0&&t||e.datesOpacity>=1&&!t)&&(e.datesOpacity=t?0:1,delete a._animations[i],a._activeAnimations--)},tag:i}}},{key:"_animateYAxis",value:function(t){var a=this,i="_animateYAxis",e=this._transitions.yAxis;return e.toDown=t,e.opacity=0,e.shift=this._yAxisAnimationShift*(t?-1:1),{hook:function(){e.opacity<1&&(e.opacity+=.05),t?e.shift<0&&(e.shift+=20/m*8):e.shift>0&&(e.shift-=20/m*8),e.opacity>=1&&(t&&e.shift>=0||!t&&e.shift<=0)&&(e.opacity=1,e.shift=0,delete a._animations[i],a._activeAnimations--)},tag:i}}},{key:"_animationLoop",value:function(){if(this._cleanUp(),this._activeAnimations||this._state.drag.active){for(var t in this._animations)this._animations[t]();this._render(),requestAnimationFrame(this._animationLoop)}else this._render()}}]),a}();function V(){var t=W.modeSwitcherData,a=W.modes,i=t.mode===a.Night,e=i?a.Day:a.Night;t.mode=e,t.element.innerHTML=t.captions[e],B.classList=i?"app":"app app--night";for(var n=0;n<t.updateHooks.length;n++)t.updateHooks[n]()}var $=W.modeSwitcherData;$.element=B.querySelector(".mode-switcher"),$.element.addEventListener("click",V,M),exports.Chart=q;
},{}],"7lXD":[function(require,module,exports) {

},{}],"Focm":[function(require,module,exports) {
"use strict";var e,t=require("weechart");function n(n){var r=document.createDocumentFragment(),a=.8*document.documentElement.clientWidth;a=a>400?400:a;for(var c=0;c<n.length;c++){var o=document.createElement("div");o.className="chart",new t.Chart(o,n[c],{w:a,h:350}),r.appendChild(o)}e.querySelector(".app__charts").appendChild(r)}function r(e){return fetch(e).then(function(e){return e.json()}).catch(console.log)}require("weechart/dist/bundle.css");var a,c="day";function o(){var n="day"===c?"night":"day";a.innerHTML="day"===n?"Switch to Night mode":"Switch to Day mode",e.classList.toggle("app--night","night"===n),(0,t.setMode)(n),c=n}function d(){var t=[];e=document.querySelector(".app"),(a=e.querySelector(".mode-switcher")).addEventListener("click",o);for(var c=1;c<=5;c++)t.push("./data/".concat(c,"/overview.json"));Promise.all(t.map(r)).then(n)}document.addEventListener("DOMContentLoaded",d);
},{"weechart":"gTvj","weechart/dist/bundle.css":"7lXD"}]},{},["Focm"], null)
//# sourceMappingURL=src.66ffce41.js.map